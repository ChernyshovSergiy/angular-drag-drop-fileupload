{"ast":null,"code":"import { throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class DragdropService {\n  constructor(http) {\n    this.http = http;\n  }\n  addFiles(images) {\n    var arr = [];\n    var formData = new FormData();\n    arr.push(images);\n    arr[0].forEach((item, i) => {\n      formData.append('avatar', arr[0][i]);\n    });\n    return this.http.post('http://localhost:4000/api/create-user', formData, {\n      reportProgress: true,\n      observe: 'events'\n    }).pipe(catchError(this.errorMgmt));\n  }\n  errorMgmt(error) {\n    let errorMessage = '';\n    if (error.error instanceof ErrorEvent) {\n      // Get client-side error\n      errorMessage = error.error.message;\n    } else {\n      // Get server-side error\n      errorMessage = `Error Code: ${error.status}\\nMessage: ${error.message}`;\n    }\n    console.log(errorMessage);\n    return throwError(() => {\n      return errorMessage;\n    });\n  }\n}\nDragdropService.ɵfac = function DragdropService_Factory(t) {\n  return new (t || DragdropService)(i0.ɵɵinject(i1.HttpClient));\n};\nDragdropService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: DragdropService,\n  factory: DragdropService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AACA,SAAqBA,UAAU,QAAQ,MAAM;AAC7C,SAASC,UAAU,QAAQ,gBAAgB;;;AAO3C,OAAM,MAAOC,eAAe;EAC1BC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;EAAe;EAEvCC,QAAQ,CAACC,MAAY;IACnB,IAAIC,GAAG,GAAU,EAAE;IACnB,IAAIC,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC7BF,GAAG,CAACG,IAAI,CAACJ,MAAM,CAAC;IAEhBC,GAAG,CAAC,CAAC,CAAC,CAACI,OAAO,CAAC,CAACC,IAAS,EAAEC,CAAM,KAAI;MACnCL,QAAQ,CAACM,MAAM,CAAC,QAAQ,EAAEP,GAAG,CAAC,CAAC,CAAC,CAACM,CAAC,CAAC,CAAC;IACtC,CAAC,CAAC;IAEF,OAAO,IAAI,CAACT,IAAI,CACbW,IAAI,CAAC,uCAAuC,EAAEP,QAAQ,EAAE;MACvDQ,cAAc,EAAE,IAAI;MACpBC,OAAO,EAAE;KACV,CAAC,CACDC,IAAI,CAACjB,UAAU,CAAC,IAAI,CAACkB,SAAS,CAAC,CAAC;EACrC;EAEAA,SAAS,CAACC,KAAwB;IAChC,IAAIC,YAAY,GAAG,EAAE;IACrB,IAAID,KAAK,CAACA,KAAK,YAAYE,UAAU,EAAE;MACrC;MACAD,YAAY,GAAGD,KAAK,CAACA,KAAK,CAACG,OAAO;KACnC,MAAM;MACL;MACAF,YAAY,GAAG,eAAeD,KAAK,CAACI,MAAM,cAAcJ,KAAK,CAACG,OAAO,EAAE;;IAEzEE,OAAO,CAACC,GAAG,CAACL,YAAY,CAAC;IACzB,OAAOrB,UAAU,CAAC,MAAK;MACrB,OAAOqB,YAAY;IACrB,CAAC,CAAC;EACJ;;;mBAjCWnB,eAAe;AAAA;;SAAfA,eAAe;EAAAyB,SAAfzB,eAAe;EAAA0B,YAHd;AAAM","names":["throwError","catchError","DragdropService","constructor","http","addFiles","images","arr","formData","FormData","push","forEach","item","i","append","post","reportProgress","observe","pipe","errorMgmt","error","errorMessage","ErrorEvent","message","status","console","log","factory","providedIn"],"sourceRoot":"","sources":["/home/brand/WebstormProjects/angular-drag-drop-fileupload/src/app/drag-drop.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { HttpErrorResponse, HttpClient } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root',\n})\n\nexport class DragdropService {\n  constructor(private http: HttpClient) {}\n\n  addFiles(images: File) {\n    var arr: any[] = [];\n    var formData = new FormData();\n    arr.push(images);\n\n    arr[0].forEach((item: any, i: any) => {\n      formData.append('avatar', arr[0][i]);\n    });\n\n    return this.http\n      .post('http://localhost:4000/api/create-user', formData, {\n        reportProgress: true,\n        observe: 'events',\n      })\n      .pipe(catchError(this.errorMgmt));\n  }\n\n  errorMgmt(error: HttpErrorResponse) {\n    let errorMessage = '';\n    if (error.error instanceof ErrorEvent) {\n      // Get client-side error\n      errorMessage = error.error.message;\n    } else {\n      // Get server-side error\n      errorMessage = `Error Code: ${error.status}\\nMessage: ${error.message}`;\n    }\n    console.log(errorMessage);\n    return throwError(() => {\n      return errorMessage;\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}